# 🏬 CoffeeBean - 중고 물품 및 중고차 거래 플랫폼
> **이용자는 중고 물품 및 중고차를 구매하거나 판매할 수 있고, 관리자는 공지 게시글을 작성하고 회원 통계를 열람할 수 있는 서비스입니다.**<br>
> **개발 기간 : 2024.08 (3주)**

<div align="center">
 <img width="400" alt="커피빈 로고" src="https://i.postimg.cc/sx3R411K/MainLogo.png"/>
</div>

## 🚀 프로젝트 소개
CoffeeBean은 이용자는 상호 간 중고 물품 및 중고차 거래가 가능하고, 관리자는 회원 관련 정보 및 통계 열람이 가능한 서비스입니다.
구매자는 판매자가 올린 매물을 검색하고 원하는 매물을 찾아 해당 판매자에게 채팅을 하여 상호 간 거래를 진행할 수 있습니다. 판매자는 판매를 희망하는 매물을 게시할 수 있고 채팅을 통해 받은 거래 요청 중 원하는 조건의 요청을 선택해 거래를 진행할 수 있습니다. 거래가 성사되면 구매자와 판매자 간에 서로 후기를 주고받을 수 있고 이 후기를 통해 신뢰도 점수가 업데이트 됩니다.
관리자는 회원 목록을 통해 우리 서비스를 이용하는 회원 현황을 확인할 수 있습니다. 또한 이용자가 회원 탈퇴 시 작성한 회원 탈퇴 사유를 종합하여 만들어진 차트를 확인하여 서비스의 부족한 점을 파악하고 개선할 수 있습니다.

## 🛠️ 기술 스택
### Environment
![Java](https://img.shields.io/badge/java-%23ED8B00.svg?style=for-the-badge&logo=coffeescript&logoColor=2F2625)
![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white)
![Hibernate Badge](https://img.shields.io/badge/Hibernate-59666C?logo=hibernate&logoColor=fff&style=for-the-badge)
![Spring](https://img.shields.io/badge/spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white)
![SpringBoot](https://img.shields.io/badge/SpringBoot-6DB33F.svg?style=for-the-badge&logo=SpringBoot&logoColor=white)
![Spring Security](https://img.shields.io/badge/Spring%20Security-6DB33F?logo=springsecurity&logoColor=fff&style=for-the-badge)
![Redis Badge](https://img.shields.io/badge/Redis-FF4438?logo=redis&logoColor=fff&style=for-the-badge)
![JSON Web Tokens Badge](https://img.shields.io/badge/JSON%20Web%20Tokens-000?logo=jsonwebtokens&logoColor=fff&style=for-the-badge)
![Node.js Badge](https://img.shields.io/badge/Node.js-5FA04E?logo=nodedotjs&logoColor=fff&style=for-the-badge)

### Config
![Gradle](https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white)

### Development
![React Badge](https://img.shields.io/badge/React-61DAFB?logo=react&logoColor=000&style=for-the-badge)
![HTML5](https://img.shields.io/badge/html5-E34F26.svg?style=for-the-badge&logo=html5&logoColor=white)
![CSS3](https://img.shields.io/badge/CSS3-1572B6.svg?style=for-the-badge&logo=Css3&logoColor=white)
![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)
![React Bootstrap Badge](https://img.shields.io/badge/React%20Bootstrap-41E0FD?logo=reactbootstrap&logoColor=000&style=for-the-badge)
![Chart.js Badge](https://img.shields.io/badge/Chart.js-FF6384?logo=chartdotjs&logoColor=fff&style=for-the-badge)

### Deployment
![Amazon Web Services Badge](https://img.shields.io/badge/Amazon%20Web%20Services-232F3E?logo=amazonwebservices&logoColor=fff&style=for-the-badge)
![Amazon EC2 Badge](https://img.shields.io/badge/Amazon%20EC2-F90?logo=amazonec2&logoColor=fff&style=for-the-badge)
![Amazon RDS](https://img.shields.io/badge/Amazon%20RDS-527FFF?logo=amazonrds&logoColor=fff&style=for-the-badge)
![Amazon S3 Badge](https://img.shields.io/badge/Amazon%20S3-569A31?logo=amazons3&logoColor=fff&style=for-the-badge)
![PM2 Badge](https://img.shields.io/badge/PM2-2B037A?logo=pm2&logoColor=fff&style=for-the-badge)

### Communication
![Notion](https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white)
![Figma Badge](https://img.shields.io/badge/Figma-F24E1E?logo=figma&logoColor=fff&style=for-the-badge)

## 👥 팀 소개
| 이재혁(팀장) | 임예나 | 정준영 | 최민혁 | 최영재 | 최은정 |                                                   
| :-: | :-: | :-: | :-: | :-: | :-: |
| <img width="160px" src="https://avatars.githubusercontent.com/u/93297796?v=4"/> | <img width="160px" src="https://avatars.githubusercontent.com/u/170907921?v=4"/> | <img width="160px" src="https://avatars.githubusercontent.com/u/103237297?v=4"/> | <img width="160px" src="https://avatars.githubusercontent.com/u/170908147?v=4"/> | <img width="160px" src="https://avatars.githubusercontent.com/u/170908102?v=4"/> | <img width="160px" src="https://avatars.githubusercontent.com/u/81670561?v=4"/> |
| [@Jaehyeok](https://github.com/JaeHyeokee) | [@Yena](https://github.com/rrynjulie) | [@Junyeong](https://github.com/jeongjunyeong) | [@Minhyuk](https://github.com/djand123) | [@Yeongjae](https://github.com/yeongjae0113) | [@Eunjeong](https://github.com/eunjeong0911) |

## 🙋‍♂️ 역할 및 기여도
| 이름 | 역할 및 기여도 |
|------|--------------|
| 이재혁 | - 🚀 프로젝트 아키텍처 설계 및 개발 총괄<br>- 🧪 마이페이지 구현 <br>- 💾 기본적인 CRUD 사이클 구축<br>- 🌐 EC2와 RDS를 활용한 배포 및 운영 환경 구축 및 관리<br>- 📊 ERD 설계|
| 임예나 | - 🎨 <br>- 🧪 <br>- 💾 |
| 정준영 | - Ⓜ️ Redis 데이터베이스를 통한 이메일 인증 구현 <br>- 🔐 Oauth2 와 JWT 토큰을 결합한 안전한 사용자 정보관리 <br>- 🛡️ User 권한에 따른 사용자 분류  <br>- 🪪 User CRUD 구축 <br>- 📊 ERD 설계|
| 최민혁 | - 🚀 데이터베이스 크롤링 및 구축<br>- 🎨 메인 홈페이지, 중고차 UI 구축<br>- 💾 중고차 CRUD 구축
| 최영재 | - 🚀 WebSocket 과 STOMP 프로토콜을 활용한 실시간 채팅 구현 <br>- 🗃️ 채팅방 리스트 CRUD 구축 <br>- 📊 ERD 설계|
| 최은정 | - 🎨 전체적인 UI 디자인 <br>- 🧪 <br>- 💾 |

## 📊 ERD (Entity-Relationship Diagram)
<img width="100%" alt="ERD" src="https://i.postimg.cc/QxcmpVKk/ERD.png"/>

프로젝트의 데이터베이스는 위와 같은 ERD를 기반으로 설계되었습니다. 

- `user` 테이블 : 사용자 정보를 저장하는 테이블입니다.
- `product` 테이블 : 중고물품 정보를 저장하는 테이블입니다.
- `car` 테이블 : 중고차 정보를 저장하는 테이블입니다.
- `dips` 테이블 : 이용자가 찜한 매물을 저장하는 테이블입니다.
- `attachment` 테이블 : 이용자가 게시물을 올릴 때 첨부한 사진을 저장하는 테이블입니다.
- `chat_room` 테이블 : 이용자가 거래 요청을 위해 생성한 채팅방 정보를 저장하는 테이블입니다.
- `message` 테이블 : 이용자들 간 채팅 내역을 저장하는 테이블입니다.
- `review` 테이블 : 이용자들 간 작성한 거래 후기 정보를 저장하는 테이블입니다.
- `sample_review` 테이블 : 이용자들 간 작성한 거래 후기 중 신뢰도 산정에 필요한 정보를 저장하는 테이블입니다.
- `post` 테이블 : 관리자가 올린 공지 게시글 정보를 저장하는 테이블입니다.
- `quit` 테이블 : 이용자가 회원 탈퇴 시 작성한 회원 탈퇴 사유 정보를 저장하는 테이블입니다.

## 🎯 주요 기능

### 중고 거래 (구매자)
- 구매자는 키워드 검색 또는 카테고리 검색을 통해 원하는 중고물품 또는 중고차를 검색할 수 있습니다.
- 구매자는 필터를 통해 좀 더 편리하고 빠르게 원하는 품목을 찾을 수 있습니다.
- 구매자는 검색한 결과에 대한 시세 정보를 차트를 통해 직관적으로 확인할 수 있습니다.
- 구매자는 원하는 매물을 찜 목록에 담거나 QR코드를 통해 공유할 수 있습니다.
- 구매자는 원하는 매물 구입을 위해 판매자에게 채팅으로 거래 신청을 할 수 있습니다.
- 구매자는 거래 후 판매자에게 거래 후기를 남길 수 있습니다. 해당 후기를 통해 판매자의 신뢰도 점수에 영향을 줄 수 있습니다.

### 중고 거래 (판매자)
- 판매자는 판매를 희망하는 중고물품 또는 중고차를 등록할 수 있습니다.
- 판매자는 채팅을 통한 거래 요청 중 원하는 거래 요청에 응할 수 있습니다.
- 판매자는 등록한 매물에 대한 판매 상태를 변경할 수 있습니다.
- 판매자는 거래 후 구매자에게 거래 후기를 남길 수 있습니다. 해당 후기를 통해 구매자의 신뢰도 점수에 영향을 줄 수 있습니다.

### 채팅
- 이용자는 잘못 보낸 메시지를 삭제할 수 있습니다.
- 이용자는 현재 대화 중인 채팅방이 어떤 매물에 대한 거래 채팅인지 확인할 수 있습니다.
- 이용자는 거래를 위한 채팅 중 채팅방을 나갈 수 있습니다.

### 관리자 회원 관리
- 관리자는 회원 목록을 열람할 수 있습니다.
- 탈퇴한 회원이 남긴 탈퇴 사유를 통해 통계화된 차트를 열람할 수 있고 추후 서비스 개선을 위해 참고할 수 있습니다.

### 관리자 공지글 게시
- 관리자는 서비스 이용에 필요하거나 도움이 될 만한 공지글을 게시하거나 수정, 삭제할 수 있습니다.

## 📺 화면 구성

| 메인 |
| :-------------------------------------------: |
| <img width="100%" alt="메인" src="https://i.postimg.cc/QC9mp1dq/image.png"/> |
| 사용자는 메인 페이지에서 중고 물품 및 중고차 거래, 공지 게시판, 회원 서비스 이용을 위해 해당 페이지에 접근할 수 있습니다. 또한, 광고와 가장 최근에 올라온 공지글, 중고 물품과 중고차의 테마별 실시간 랭킹을 확인할 수 있습니다. |

| 로그인 / 회원가입 |
| :-------------------------------------------: |
| <img width="49%" alt="로그인" src="https://i.postimg.cc/wT1ZVRGZ/image.png"/> <img width="49%" alt="회원가입" src="https://i.postimg.cc/K8MXZ37B/image.png"/> |
| 사용자는 회원 서비스를 이용하기 위해 이메일 회원 또는 소셜 회원을 선택해 가입하고 로그인 할 수 있습니다. |

| 중고 물품 거래 |
| :-------------------------------------------: |
| <img width="49%" alt="중고 물품 거래" src="https://i.postimg.cc/KYf0FmWt/1.png"/> <img width="49%" alt="중고 물품 거래" src="https://i.postimg.cc/RZrsLsfJ/1-2.png"/> <img width="49%" alt="중고 물품 거래" src="https://i.postimg.cc/ht9CyLby/2-1.png"/> <img width="49%" alt="중고 물품 거래" src="https://i.postimg.cc/xCFgJtnC/2-2.png"/> <img width="49%" alt="중고 물품 거래" src="https://i.postimg.cc/bJv3wKXW/3.png"/> <img width="49%" alt="중고 물품 거래" src="https://i.postimg.cc/Zq81NkMq/image.png"/> |
| 사용자는 판매자가 되어 본인의 물건을 판매할 수도 있고 구매자가 되어 원하는 매물을 구매할 수도 있습니다. 매물마다 정해진 카테고리를 통해서 검색할 수도 있고 헤더 상단의 검색바를 통한 키워드 검색을 통해서도 원하는 물품을 찾아볼 수 있습니다. 이 과정에서 사용자는 각 카테고리 또는 검색 결과에 대한 상품 리스트의 시세 정보를 차트로 볼 수 있으며, 구매자는 마음에 드는 물품을 찜하거나 QR코드를 통해 공유할 수 있습니다. 구매를 희망하는 상품에 대해서는 채팅을 통해 판매자와 상호작용할 수 있으며 거래가 완료되면 해당 거래에 대해 서로 후기도 보낼 수 있습니다. 이 후기를 통해 추후 사용자의 신뢰지수가 올라가거나 내려갈 수 있습니다. |

| 중고차 거래 |
| :-------------------------------------------: |
| <img width="49%" alt="중고차 거래" src="https://i.postimg.cc/Hnq23nJ1/1.png"/> <img width="49%" alt="중고차 거래" src="https://i.postimg.cc/Gt5NRbHX/2.png"/> <img width="49%" alt="중고차 거래" src="https://i.postimg.cc/fW21mfBY/3.png"/> |
| 중고 물품 거래와 이용 방법은 동일합니다. 다만 중고 물품보다 고가인 만큼 필수적으로 기재해야 하는 정보가 많습니다. 또한, 보험료를 조회해 볼 수 있고 보고 있는 차량과 유사한 추천 차량 정보도 확인할 수 있습니다. |

| 마이 페이지 - 거래 정보 |
| :-------------------------------------------: |
| <img width="49%" alt="마이 페이지" src="https://i.postimg.cc/tC8fmC0T/1.png"/> <img width="49%" alt="마이 페이지" src="https://i.postimg.cc/W1rKRLj7/2.png"/> <img width="49%" alt="마이 페이지" src="https://i.postimg.cc/VN8hmGkP/3.png"/> |
| 사용자는 본인이 어떤 매물을 구매하거나 판매했는지, 또 어떤 매물을 찜해뒀는지 확인할 수 있습니다. |

| 마이 페이지 - 내 정보 |
| :-------------------------------------------: |
| <img width="49%" alt="마이 페이지" src="https://i.postimg.cc/5tSR0BXY/4.png"/> <img width="49%" alt="마이 페이지" src="https://i.postimg.cc/FRFnJYSP/5.png"/> <img width="49%" alt="마이 페이지" src="https://i.postimg.cc/j2LgZBZP/6.png"/> <img width="49%" alt="마이 페이지" src="https://i.postimg.cc/C1vrCwHw/7.png"/> |
| 사용자는 거래 완료 후 주고 받은 후기를 확인할 수 있고, 내 정보를 수정하거나 회원 탈퇴를 할 수 있습니다. |

| 관리자 - 공지 게시판 |
| :-------------------------------------------: |
| <img width="49%" alt="게시판" src="https://i.postimg.cc/4dXjb8DQ/1.png"/> <img width="49%" alt="게시판" src="https://i.postimg.cc/63zgHrwJ/2.png"/> <img width="49%" alt="게시판" src="https://i.postimg.cc/T1wSBKYy/3.png"/> |
| 관리자는 사용자들에게 공지하고자 하는 내용을 게시판을 통해 공지할 수 있습니다. 게시글엔 첨부파일도 첨부할 수 있으며, 이 첨부파일을 사용자가 다운로드 받을 수도 있습니다. 가장 최근에 올린 공지는 커피빈 메인 페이지 공지 배너에 노출됩니다. |

| 관리자 - 회원 탈퇴 사유 분석 차트 |
| :-------------------------------------------: |
| <img width="100%" alt="게시판" src="https://i.postimg.cc/HLDqjW3K/image.png"/> |
| 관리자는 사용자가 회원 탈퇴를 할 때 사유를 작성해 제출하도록 하고, 이 사유들을 종합하여 차트로 확인할 수 있습니다. 이 차트를 활용해 추후 서비스 개선 시 활용할 수 있습니다. |

## 🎉 프로젝트 결과 및 성과
- 🎯 사용자 친화적인 인터페이스와 직관적인 시각화를 통해 이용자 및 관리자가 서비스를 보다 쉽게 이해하고 활용할 수 있도록 하였습니다.
- 🌐 Spring Boot를 활용하여 안정적이고 효율적인 서버를 구축하였습니다.
- 🗄️ 대량의 데이터를 효과적으로 관리하기 위해 검색 및 조회 속도를 개선하였습니다.
- ✅ 테스트 파일을 지속적으로 작성하고 수행하여 서비스의 안정성을 확보하였습니다.

## 🚨 트러블슈팅 가이드
### UI 디자인 과정에서 CSS 충돌 문제 발생
- 증상 : 다른 페이지에 적용해 둔 CSS 설정이 엉뚱한 페이지에 적용되어 UI가 깨지는 현상이 발생했습니다.
- 원인 : React는 CSS 파일을 import 하면 어떤 jsx 파일에서 import 하든 프로젝트 전체에 적용되기 때문에 발생한 현상이었습니다. 
- 해결 : CSS 파일의 확장자를 .module.css 전부 바꾸고 HTML 부분의 요소의 클래스명을 모듛화된 CSS의 형식에 맞게 바꾸고, import 하는 방법도 CSS 파일 자체를 하나의 모듈로 정의하여 import 하는 방식으로 바꾸어 문제를 해결할 수 있었습니다.

### Client Server 배포 단계에서 빌드 실패
- 증상 : 클라이언트 서버를 배포할 때 빌드 단계에서 멈추는 현상이 반복적으로 발생했습니다.
- 원인 : 클라이언트 서버 빌드 시 메모리 소모량이 할당받은 인스턴스 메모리 용량보다 커서 발생된 현상이었습니다.
- 해결 : 클라이언트 서버 빌드는 로컬에서 진행하고, 그 결과물을 깃에 올린 후 배포 서버에서 내려받는 형식으로 바꾸어 문제를 해결할 수 있었습니다.

### Redis Server 배포 단계에서 빌드 실패
- 증상 : Redis 서버를 활성화하는 단계에서 멈추는 현상이 반복적으로 발생했습니다.
- 원인 : Redis 서버 활성화 시 메모리 소모량이 할당받은 인스턴스 메모리 용량보다 커서 발생된 현상이었습니다.
- 해결 : 기존 t2.micro(1GB) 형식의 인스턴스를 종료하고 t2.medium(4GB) 형식의 인스턴스를 새로 개설해 사용하여 문제를 해결할 수 있었습니다.

이러한 트러블슈팅 경험을 바탕으로 서비스의 안정성과 성능을 지속적으로 개선해 나갈 수 있었습니다. 앞으로도 지속적인 모니터링과 피드백을 통해 발생할 수 있는 문제를 사전에 방지하고 대비할 수 있도록 노력하겠습니다.
